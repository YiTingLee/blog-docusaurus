<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Kubernetes/kubernetes-intro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6FN1KHERQY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6FN1KHERQY",{anonymize_ip:!0})</script><title data-rh="true">Kubernetes系列文 - 基礎元件介紹 (一) | Blog by Eric Lee</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yitinglee.github.io//Kubernetes/kubernetes-intro"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kubernetes系列文 - 基礎元件介紹 (一) | Blog by Eric Lee"><meta data-rh="true" name="description" content="聊聊Kubernetes的基礎元件"><meta data-rh="true" property="og:description" content="聊聊Kubernetes的基礎元件"><link data-rh="true" rel="icon" href="/img/photo.jpg"><link data-rh="true" rel="canonical" href="https://yitinglee.github.io//Kubernetes/kubernetes-intro"><link data-rh="true" rel="alternate" href="https://yitinglee.github.io//Kubernetes/kubernetes-intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://yitinglee.github.io//Kubernetes/kubernetes-intro" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.25c7bddd.css">
<link rel="preload" href="/assets/js/runtime~main.d5670987.js" as="script">
<link rel="preload" href="/assets/js/main.0ac5380b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Eric Lee</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Articles</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/yi-ting-lee-725237166/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.facebook.com/profile.php?id=100005696377210" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.cakeresume.com/656b08" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Cakeresume<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/YiTingLee" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/database">Database</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/">Vertical Scaling Postgres with Zero-downtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Database/row-column-database-intro">Row-oriented vs Column-oriented Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Database/database-index">Database Index</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/docker">Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Docker/docker-image-minimization">Docker Image Minimization</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/design-pattern">Design Pattern</a><button aria-label="Toggle the collapsible sidebar category &#x27;Design Pattern&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design-pattern-strategy-pattern">Strategy Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Design-Pattern/design-pattern-observer-pattern">Observer Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Design-Pattern/design-pattern-decorator-pattern">Decorator Pattern</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Kubernetes/kubernetes-intro">Kubernetes系列文 - 基礎元件介紹 (一)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Kubernetes/pod-management">Kubernetes系列文 - Pod相關抽象元件介紹 (二)</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/kubernetes"><span itemprop="name">Kubernetes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Kubernetes系列文 - 基礎元件介紹 (一)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes系列文 - 基礎元件介紹 (一)</h1></header><p>在這篇文章中我們會聊到</p><ul><li>Kubernetes 基本介紹</li><li>Application 運行的歷史</li><li>Worker Node 與 Master Node 介紹</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-基本介紹">Kubernetes 基本介紹<a class="hash-link" href="#kubernetes-基本介紹" title="Direct link to heading">​</a></h2><p>Kubernetes 又稱 K8S (因為 K 與 S 之間有 8 個字母)，是 Google 於 2014 年首次公開發佈，並於 2015 年發布正式版的一套開源軟體。Kubernetes 是一套能夠進行自動化部署、擴展與容器管理等的系統。</p><p>簡單來說開發者只需要撰寫 yaml，Kubernetes 就會幫助我們把 Application 部署到不同的機器上，並根據機器狀態和 Pod 狀態隨時進行調節，讓工程師可以省去麻煩的人工部署與維運。</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>My tip</div><div class="admonitionContent_S0QG"><p>如果還不懂什麼是 Pod 的話，可以先把 Pod 想像成 Container 或是 Application</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-到底能幫忙什麼">Kubernetes 到底能幫忙什麼<a class="hash-link" href="#kubernetes-到底能幫忙什麼" title="Direct link to heading">​</a></h4><ul><li>把 Application 部署到任何機器上</li><li>將外部流量轉入到指定的 Pod 中</li><li>偵測 Pod 的健康狀態，隨時根據情況進行 Pod 重啟</li><li>偵測流量與資源負載(CPU/Memory Resource 等)變化，自動擴展 Pod/Node 數量</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-運行的歷史">Application 運行的歷史<a class="hash-link" href="#application-運行的歷史" title="Direct link to heading">​</a></h2><p>在正式開始介紹 Kubernetes 的基礎元件之前，我們先來講古，聊聊怎麼從單體架構慢慢演變成目前的 Kubernetes 生態。</p><p><img loading="lazy" alt="Environment-History" src="/assets/images/environment_history-bdbe0c90d8778b3931be8ac273d000cd.png" width="858" height="906" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="traditional-environment">Traditional Environment<a class="hash-link" href="#traditional-environment" title="Direct link to heading">​</a></h4><p>這是一個沒有雲端的時代，所有 Server 都是實體伺服器。那個年代大部分的 Application 都是採取 JSP 的伺服器架構(SQL query 與 html 都黏在一起的可怕年代 XD)，搭配其他的 Service (Process)並透過下 CLI 或者 RPC 的方式進行溝通來完成服務。</p><p>可想而知，在一台機器上會跑非常多的 Application 並且都共享同一台機器的硬體資源，如果其中一個 App 的 loading 比較重的時候，該 App 就會佔比較多的硬體資源，其他的 App 就會因為搶不到資源而被影響。如果開多台實體伺服器把不同的 Application 放到不同 Server 上，也會遇到硬體資源浪費的問題，總之非常難做到妥善且有效率的分配硬體資源。</p><p>應該很多人都沒有經歷過這個時代(我也沒有，很幸運我只有經歷過 VM 時代)，但還是可以把這種部署機器的方式對比成自己本地的電腦，想像一下你再開發的時候，也是需要在你本地的電腦把所有的 Application 與相關的 library 都裝起來，差別只是之前的架構是跑 Production 的產品而已。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="virtualized-environment">Virtualized Environment<a class="hash-link" href="#virtualized-environment" title="Direct link to heading">​</a></h4><p>為了解決硬體資源分配的問題，在實體機器上裝 VM 的方式就開始慢慢興起。VM 允許在同一台實體機器上安裝多台完整的虛擬機器，並且每一台虛擬機都是獨立的，都各自擁有自己的作業系統與 File System。如上圖所示，VM 的架構中會有一層 VM Hypervisor 負責分配硬體資源並分配給不同的虛擬機器，透過此方式解決傳統機器中搶奪硬體資源的問題。</p><p>每一台虛擬機器上都必須要安裝完整的作業系統，某種程度上也是一種硬體資源的浪費，所以後來出現了 Container。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="container-environment">Container Environment<a class="hash-link" href="#container-environment" title="Direct link to heading">​</a></h4><p>為了解決 VM 內必須裝完整 OS 所造成資源浪費的問題，docker 就出現了！docker 共用了實體機器的 Linux 內核，使得跑在 docker engine 上的 container 不需要額外安裝 OS 就能擁有阻隔環境的效果，省掉了大量的硬體再處理 OS 的資源，並且也擁有自己的 file system，用起來的感覺就像在 VM 裡面使用一樣。除此之外，docker/container 還擁有更小的模組特性，快速啟動關閉的特性，相同硬體資源可以比 VM 的方式多 5 到 10 倍的容器數量。並且 container 的特性也非常適合 microservices 的設計方式。所以在 2014 年起 Docker 開始快速崛起！</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-environment">Kubernetes Environment<a class="hash-link" href="#kubernetes-environment" title="Direct link to heading">​</a></h4><p>在 docker 崛起後，馬上就開始面臨如何管理在不同機器上的 container 問題。docker swarm + docker-compose 就出現了，但由於是比較早期出的產品，對比 Kubernetes 來說還是有很大的局限性。例如沒有跨 Node 的數據儲存概念(可以對比 Kubernetes 的 etcd)等，接著就開啟了大 Kubernetes 的時代。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-cluster">Kubernetes Cluster<a class="hash-link" href="#kubernetes-cluster" title="Direct link to heading">​</a></h2><p>Kuberentes Cluster 是一群機器的集合，由一個 Master Node 與數個 Worker Node (GKE 的上限是 15000 個 Node per cluster)所組成的。通常一個 Cluster 就會包含整個產品或全部服務的環境(當然有 multi-cluster 的環境，但基礎篇我們先不談)。</p><p><img loading="lazy" alt="Master-vs-Worker-Node" src="/assets/images/master-vs-worker-node-ee43866f4290552116d001ce6d9ffd95.png" width="1092" height="587" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="master-node">Master Node<a class="hash-link" href="#master-node" title="Direct link to heading">​</a></h2><p>Master Node 就是整個 Kubernetes 的指揮中心，負責控制或管理所有的 Worker Node 與服務(其實就是掌管所有的事)。其中包含掌控所有 API 的 kube-apiserver，儲存所有 cluster config 與數據的 etcd，負責分配 Pod 到各個 WorkerNode 的 kube-scheduler，以及監控與執行所有 Controller 物件的 kube-controller-manager。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kube-apiserver">kube-apiserver<a class="hash-link" href="#kube-apiserver" title="Direct link to heading">​</a></h4><p>kube-apiserver 提供整個 Cluster 的 RESTful API，其中包含 Pod 或 Node 狀態變更等。我們從 kubectl 這個 CLI 下的命令也都是打到 kube-apiserver 來處理。主要功能有</p><ul><li>提供整個 Cluster 的 API</li><li>提供 Worker Node 之間溝通的管道</li><li>僅能通過 kube-apiserver 修改或讀取 etcd 內的資料</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="etcd">etcd<a class="hash-link" href="#etcd" title="Direct link to heading">​</a></h4><p><a href="https://github.com/etcd-io/etcd" target="_blank" rel="noopener noreferrer">etcd</a>本身是個 open source，是一個同時兼具一致性與高可用性的 key-value <code>群集</code>資料庫。由於高可用性的緣故，Kubernetes 選用 etcd 來作為 Master Node 上儲存數據的資料庫。主要用來保存網路配置與物件狀態資訊等。這邊的物件幾乎包含所有抽象元件(pod / deployment / secret / role / service 等)。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kube-scheduler">kube-scheduler<a class="hash-link" href="#kube-scheduler" title="Direct link to heading">​</a></h4><p>kube-scheduler 的主要功能負責將一個新的 Pod 根據硬體資源的狀態分配到一個適合的 Node 中。但 scheduler 其實是可以聊到很深的，它能夠根據需求進行客製化的 scheduling 設定與調整，未來進階我們再來討論。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kube-controller-manager">kube-controller-manager<a class="hash-link" href="#kube-controller-manager" title="Direct link to heading">​</a></h4><p>kube-controller-manager 是負責執行所有的 controller 物件的主要處理者，常見的 Controller 物件有 NodeController、ReplicationController 與 ServiceController 等。舉例來說當今天 Node 因意外停機時，kube-controller-manager 就會要求該 Node 重啟，或者啟動一台新的 Node 來符合該 NodeController 所要求的硬體資源。ReplicationController 也同理。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="worker-node">Worker Node<a class="hash-link" href="#worker-node" title="Direct link to heading">​</a></h2><p>一個 Worker Node 對應到的就是一台實體的機器，這些實體的機器可以是不同等級的機器，舉例來說，一個 Worker Node 可以是一個小的 Raspberry Pi，也可以是非常強的 GPU 機器。Worker Node 也是在 Kubernetes 中真正負責運行 Pod 的機器，可以說是運行機器的最小單位。</p><p>Worker Node 上主要有三種元件 kubelet、kube-proxy、Container Runtime</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubelet">kubelet<a class="hash-link" href="#kubelet" title="Direct link to heading">​</a></h4><p>kubelet 是 Worker Node 上最重要的服務，主要的功能有</p><ul><li>監控 Pod 與該 Node 的狀態，並通知給 kube-apiserver</li><li>定期的跟 kube-apiserver 要 Pod 的 Spec，並保證該 Node 的 Pod 都有照著 Spec 執行 (這些規則可能來自於 kubernetes 的 yaml)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kube-proxy">kube-proxy<a class="hash-link" href="#kube-proxy" title="Direct link to heading">​</a></h4><p>kube-proxy 是跑在 Worker Node 上的一個 Network Proxy，kube-proxy 會監控 kube-apiserver 中關於 service 與 node 的資源變化。並將外部流量打到指定的 Pod 中。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="container-runtime">Container Runtime<a class="hash-link" href="#container-runtime" title="Direct link to heading">​</a></h4><p>真正運行 Container 的地方，目前 Kubernetes 已經不支援 docker runtime 了。目前支援的有 <a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener noreferrer">CRI-O runtime</a> 與 <a href="https://github.com/containerd/containerd" target="_blank" rel="noopener noreferrer">containerd</a>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結論">結論<a class="hash-link" href="#結論" title="Direct link to heading">​</a></h2><p>這篇只有簡單介紹了 Application 運行在機器上的歷史與基本的 Kubernetes 元件。當初我剛開始在學習 Kubernetes 的時候也是從這些 Master Node 與 Worker Node 開始看起，但第一次讀的時候並沒有看懂，反而是後面章節教的抽象元件( Pod / ReplicaSet / Deployment / Service 等)比較容易理解。所以如果這篇基本元件看不懂的建議抽象元件搞懂後，再回來複習這篇，會有 <code>哦！原來底層是這樣跑的！</code>的感覺。</p><p>即便不了解這些基本元件的原理與功能，只要知道 Kuberentes 會有相關的元件幫你做這些事情(同步 Pod 狀態或確認 Pod 會照著 Spec 執行等)，對於後續學習高階的抽象元件不會有太大的阻礙。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/kubernetes">Kubernetes</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-05T12:38:42.000Z">Sep 5, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/category/kubernetes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Kubernetes/pod-management"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes系列文 - Pod相關抽象元件介紹 (二)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kubernetes-基本介紹" class="table-of-contents__link toc-highlight">Kubernetes 基本介紹</a></li><li><a href="#application-運行的歷史" class="table-of-contents__link toc-highlight">Application 運行的歷史</a></li><li><a href="#kubernetes-cluster" class="table-of-contents__link toc-highlight">Kubernetes Cluster</a></li><li><a href="#master-node" class="table-of-contents__link toc-highlight">Master Node</a></li><li><a href="#worker-node" class="table-of-contents__link toc-highlight">Worker Node</a></li><li><a href="#結論" class="table-of-contents__link toc-highlight">結論</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Articles</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/yi-ting-lee-725237166/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/profile.php?id=100005696377210" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/YiTingLee" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.cakeresume.com/656b08" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cakeresume<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Blog by Eric Lee.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d5670987.js"></script>
<script src="/assets/js/main.0ac5380b.js"></script>
</body>
</html>