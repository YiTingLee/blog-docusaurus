"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[137],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>d});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),p=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=p(e.components);return a.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=p(t),d=r,f=m["".concat(u,".").concat(d)]||m[d]||c[d]||o;return t?a.createElement(f,l(l({ref:n},s),{},{components:t})):a.createElement(f,l({ref:n},s))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3148:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const o={id:"kubernetes-configmap-and-secret",title:"Kubernetes\u7cfb\u5217\u6587 - Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u4ecb\u7d39 (\u4e94)",description:"\u804a\u804aKubernetes Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u7b49",slug:"configmap-and-secret",date:"2022-10-17T02:00:00.000+0800",template:"post",draft:!1,category:"Kubernetes",tags:["Kubernetes","Volume","ConfigMap","Secret"],socialImage:""},l=void 0,i={unversionedId:"Kubernetes/kubernetes-configmap-and-secret",id:"Kubernetes/kubernetes-configmap-and-secret",title:"Kubernetes\u7cfb\u5217\u6587 - Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u4ecb\u7d39 (\u4e94)",description:"\u804a\u804aKubernetes Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u7b49",source:"@site/docs/Kubernetes/25-Kubernetes-ConfigMap-and-Secret.md",sourceDirName:"Kubernetes",slug:"/Kubernetes/configmap-and-secret",permalink:"/Kubernetes/configmap-and-secret",draft:!1,tags:[{label:"Kubernetes",permalink:"/tags/kubernetes"},{label:"Volume",permalink:"/tags/volume"},{label:"ConfigMap",permalink:"/tags/config-map"},{label:"Secret",permalink:"/tags/secret"}],version:"current",lastUpdatedAt:1665915800,formattedLastUpdatedAt:"Oct 16, 2022",sidebarPosition:25,frontMatter:{id:"kubernetes-configmap-and-secret",title:"Kubernetes\u7cfb\u5217\u6587 - Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u4ecb\u7d39 (\u4e94)",description:"\u804a\u804aKubernetes Volume\u3001ConfigMap\u8207Secret\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u7b49",slug:"configmap-and-secret",date:"2022-10-17T02:00:00.000+0800",template:"post",draft:!1,category:"Kubernetes",tags:["Kubernetes","Volume","ConfigMap","Secret"],socialImage:""},sidebar:"defaultSidebar",previous:{title:"Kubernetes\u7cfb\u5217\u6587 - Ingress\u62bd\u8c61\u5143\u4ef6\u8207Networks\u4ecb\u7d39 (\u56db)",permalink:"/Kubernetes/ingress-and-networks"},next:{title:"Kubernetes\u7cfb\u5217\u6587 - HealthCheck\u76f8\u95dc\u7684\u62bd\u8c61\u5143\u4ef6\u4ecb\u7d39 (\u516d)",permalink:"/Kubernetes/healthcheck"}},u={},p=[{value:"Volume \u57fa\u672c\u4ecb\u7d39",id:"volume-\u57fa\u672c\u4ecb\u7d39",level:2},{value:"\u70ba\u4ec0\u9ebc\u9700\u8981 Configuration",id:"\u70ba\u4ec0\u9ebc\u9700\u8981-configuration",level:2},{value:"ConfigMap \u57fa\u672c\u4ecb\u7d39",id:"configmap-\u57fa\u672c\u4ecb\u7d39",level:2},{value:"Secret \u57fa\u672c\u4ecb\u7d39",id:"secret-\u57fa\u672c\u4ecb\u7d39",level:2},{value:"emptyDir \u57fa\u672c\u4ecb\u7d39",id:"emptydir-\u57fa\u672c\u4ecb\u7d39",level:2},{value:"hostPath \u57fa\u672c\u4ecb\u7d39",id:"hostpath-\u57fa\u672c\u4ecb\u7d39",level:2},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}],s={toc:p};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u5728\u9019\u7bc7\u6587\u7ae0\u4e2d\u6211\u5011\u6703\u804a\u5230"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Volume \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("li",{parentName:"ul"},"\u70ba\u4ec0\u9ebc\u9700\u8981 Configuration"),(0,r.kt)("li",{parentName:"ul"},"ConfigMap \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("li",{parentName:"ul"},"Secret \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("li",{parentName:"ul"},"emptyDir \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("li",{parentName:"ul"},"hostPath \u57fa\u672c\u4ecb\u7d39")),(0,r.kt)("h2",{id:"volume-\u57fa\u672c\u4ecb\u7d39"},"Volume \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("p",null,"\u7528\u904e Container \u7684\u5927\u5bb6\u61c9\u8a72\u90fd\u77e5\u9053\u6bcf\u6b21 Container \u91cd\u555f\u5f8c Container \u5167\u90e8\u7684\u8cc7\u6599\u90fd\u6703\u6d88\u5931\uff0c\u53c8\u6216\u8005\u8aaa\u6bcf\u6b21\u91cd\u555f\u5f8c Container \u90fd\u6703\u6062\u5fa9\u5230 Image \u6700\u4e7e\u6de8\u7684\u72c0\u614b\u3002\u5982\u679c\u6211\u5011\u7684 Container \u9700\u8981\u4f9d\u8cf4\u67d0\u4e9b\u4e0d\u592a\u6703\u66f4\u52d5\u7684\u6a94\u6848\u7684\u8a71\uff0c\u6211\u5011\u53ef\u4ee5\u9078\u64c7\u5728 Build Docker Image \u7684\u968e\u6bb5\u5c31\u628a\u9019\u4e9b\u6a94\u6848 build \u5230 image \u4e2d\u3002\u4f46\u5018\u82e5\u9019\u4e9b\u8cc7\u6599\u662f\u6703\u96a8\u8457\u60c5\u6cc1\u800c\u6539\u8b8a\u7684\u8a71\uff0c\u6211\u5011\u5c31\u9700\u8981\u900f\u904e Volume \u4f86\u5e6b\u52a9\u6211\u5011\u89e3\u6c7a\u9019\u500b\u554f\u984c\u3002"),(0,r.kt)("p",null,"Kubernetes \u63d0\u4f9b\u4e86 Volume \u4f86\u89e3\u6c7a Container \u4e2d\u7121\u6cd5\u4fdd\u5b58\u8cc7\u6599\u7684\u554f\u984c\uff0c\u7c21\u55ae\u4f86\u8aaa\u900f\u904e Volume \u6211\u5011\u53ef\u4ee5\u5c07\u4e00\u4efd\u8cc7\u6599\u4ee5\u6a94\u6848\u6216\u74b0\u5883\u8b8a\u6578\u7684\u65b9\u5f0f mount \u5230 Container \u5167\uff0c\u9019\u7a2e\u65b9\u5f0f\u4f7f Pod \u56e0\u70ba\u4efb\u4f55\u539f\u56e0\u58de\u6389\u6642\uff0c\u65b0\u7684 Pod \u90fd\u53ef\u4ee5\u900f\u904e Volume \u7e7c\u7e8c\u4f7f\u7528\u540c\u4e00\u4efd\u8cc7\u6599\uff0c\u5b8c\u5168\u4e0d\u9700\u8981\u64d4\u5fc3\u8cc7\u6599\u6d88\u5931\u7684\u554f\u984c\u3002\u53e6\u5916 Kubernetes \u63d0\u4f9b\u4e86\u591a\u7a2e\u7684 Volume \u985e\u578b\u4f86\u56e0\u61c9\u5404\u7a2e\u4e0d\u540c\u7684\u9700\u6c42\u3002\u5176\u4e2d\u5e7e\u7a2e\u6700\u5e38\u898b\u7684\u662f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ConfigMap (\u52d5\u614b\u914d\u7f6e)"),(0,r.kt)("li",{parentName:"ul"},"Secret (\u52d5\u614b\u914d\u7f6e)"),(0,r.kt)("li",{parentName:"ul"},"emptyDir (\u975e\u6c38\u4e45\u6027\u5132\u5b58)"),(0,r.kt)("li",{parentName:"ul"},"hostPath (\u975e\u6c38\u4e45\u6027\u5132\u5b58)")),(0,r.kt)("h2",{id:"\u70ba\u4ec0\u9ebc\u9700\u8981-configuration"},"\u70ba\u4ec0\u9ebc\u9700\u8981 Configuration"),(0,r.kt)("p",null,"\u4ecb\u7d39 ConfigMap \u4e4b\u524d\u6211\u5011\u5148\u804a\u804a\u70ba\u4ec0\u9ebc\u9700\u8981 Configuration\u3002"),(0,r.kt)("p",null,"\u7121\u8ad6\u662f\u5beb\u4efb\u4f55\u7a0b\u5f0f\u8a9e\u8a00\uff0c\u5927\u5bb6\u80af\u5b9a\u90fd\u6709\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\u7684\u7d93\u9a57\u3002\u901a\u5e38\u90fd\u662f\u628a\u74b0\u5883\u8b8a\u6578\u8a2d\u5b9a\u597d\u5f8c\uff0c\u7136\u5f8c\u5728\u4e3b\u7a0b\u5f0f\u88e1\u9762\u628a\u9019\u4e9b\u74b0\u5883\u8b8a\u6578\u8b80\u9032\u4f86\uff0c\u518d\u6839\u64da\u74b0\u5883\u8b8a\u6578\u7684\u6578\u503c\u6c7a\u5b9a\u4e3b\u7a0b\u5f0f\u8981\u57f7\u884c\u7684 Flow \u6216\u908f\u8f2f\u3002\u800c\u9019\u6a23\u7684\u4e00\u5927\u5305\u74b0\u5883\u8b8a\u6578\uff0c\u6211\u5011\u5c31\u6703\u6839\u64da module \u6216\u662f\u529f\u80fd\u628a\u5b83\u5011\u8996\u70ba\u662f\u4e00\u7d44 config\u3002\u900f\u904e config \u6211\u5011\u53ef\u4ee5\u4f7f\u74b0\u5883\u4e0a\u7684\u8cc7\u6599\u8207\u7a0b\u5f0f\u672c\u8eab\u66f4\u5f48\u6027\u8207\u66f4 decouple\u3002"),(0,r.kt)("p",null,"\u6211\u5011\u53ef\u4ee5\u60f3\u4e00\u4e0b\u70ba\u4ec0\u9ebc\u6211\u5011\u9700\u8981\u9019\u500b\u6771\u897f\uff0c\u5047\u8a2d\u6c92\u6709\u8a2d\u5b9a config \u7684\u60c5\u6cc1\u4e0b\uff0c\u6211\u5011\u53ef\u4ee5\u628a\u9019\u4e9b\u6578\u503c hordcode \u5728\u7a0b\u5f0f\u78bc\u88e1\u9762\uff0c\u7a0b\u5f0f\u57f7\u884c\u5b8c\u7684\u7d50\u679c\u9084\u662f\u4e00\u6a23\u3002\u4f46\u4eca\u5929\u5982\u679c Replica Database \u7a81\u7136\u61f7\u6389\u4e86\uff0c\u6211\u5011\u9700\u8981\u628a Database \u6539\u6210\u9023\u7dda\u5230\u5099\u7528\u7684 Database \u6642\uff0c\u6211\u5011\u53ea\u9700\u8981\u628a\u74b0\u5883\u8b8a\u6578\u7684 Database Host/User/Password \u66f4\u6539\u4e00\u4e0b\u4e26\u91cd\u65b0\u8b80\u53d6\u74b0\u5883\u8b8a\u6578\u5c31\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u4e86\uff0c\u904e\u7a0b\u4e0d\u6703\u8d85\u904e 5 \u5206\u9418\u3002\u4f46\u5982\u679c\u6211\u5011\u6c92\u6709\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\uff0c\u6211\u5011\u5c31\u9700\u8981\u6539\u5b8c code \u5f8c\u91cd\u65b0\u8dd1 CICD \u7136\u5f8c\u624d\u80fd\u4e0a\u7248\uff0c\u904e\u7a0b\u6642\u9593\u5c31\u6703\u53d6\u6c7a\u65bc\u5404\u5c08\u6848\u7684\u72c0\u614b\uff0c\u4f46\u80af\u5b9a\u7684\u662f\u4e00\u5b9a\u90fd\u6bd4\u524d\u8005\u9084\u6162\u4e0a\u5f88\u591a\u3002"),(0,r.kt)("p",null,"\u53e6\u5916\u6211\u5011\u5beb\u7684\u7a0b\u5f0f\u5f88\u591a\u60c5\u6cc1\u4e0b\u662f\u6703\u88ab\u914d\u7f6e\u5230\u5b8c\u5168\u4e0d\u4e00\u6a23\u7684\u74b0\u5883\u4e0a\uff0c\u8209\u4f8b\u4f86\u8aaa\u5982\u679c\u662f 2B \u7684\u7522\u54c1\uff0c\u6839\u64da\u4e0d\u540c\u516c\u53f8\u7684\u9700\u6c42\u9019\u500b\u7522\u54c1\u5728\u57f7\u884c\u74b0\u5883\u4e0a\u90fd\u6703\u6709\u81ea\u5df1\u7684\u4f3a\u670d\u5668\u8207\u8cc7\u6599\u5eab\u7b49\uff0c\u8eab\u70ba\u958b\u767c\u7aef\u6211\u5011\u4e0d\u592a\u53ef\u80fd\u6839\u64da\u4e0d\u540c\u7684\u516c\u53f8\u5c31\u5207\u4e0d\u540c\u7684 git branch\uff0c\u9019\u6a23\u975e\u5e38\u7684\u6c92\u6709\u6548\u7387\u3002\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u900f\u904e Config \u5e6b\u6211\u5011\u628a\u7a0b\u5f0f\u52d5\u614b\u7684\u5c0d\u61c9\u5230\u4e0d\u540c\u74b0\u5883\u4e0a\u800c\u4e0d\u52d5\u5230\u7a0b\u5f0f\u672c\u8eab\u3002"),(0,r.kt)("h2",{id:"configmap-\u57fa\u672c\u4ecb\u7d39"},"ConfigMap \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("p",null,"ConfigMap \u662f Kubernetes \u63d0\u4f9b\u7684 Key-Value \u5f62\u5f0f\u7684\u5143\u4ef6\uff0c\u7528\u65bc\u5132\u5b58 Cluster \u4e2d\u4e0d\u540c\u74b0\u5883\u4e0b\u7684 config\uff0c\u800c\u9019\u4e9b config \u53ef\u4ee5\u900f\u904e Kubernetes \u672c\u8eab\u7684\u914d\u7f6e\u9054\u5230\u52d5\u614b\u7684\u63d2\u5165\u5230 Pod \u4e2d\u7684\u74b0\u5883\u8b8a\u6578\u7b49\u3002"),(0,r.kt)("p",null,"ConfigMap \u53ef\u4ee5\u505a\u5230"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5132\u5b58 Key-Value \u5f62\u5f0f\u7684 config \u6578\u64da"),(0,r.kt)("li",{parentName:"ul"},"\u5132\u5b58\u4ee5 File \u70ba\u55ae\u4f4d\u7684 Config (\u4f8b\u5982 redis config file \u6216 nginx config \u7b49)"),(0,r.kt)("li",{parentName:"ul"},"\u5c07 Key-Value \u5f62\u5f0f\u7684 config \u63d2\u5165\u5230 Pod \u74b0\u5883\u8b8a\u6578\u4e2d"),(0,r.kt)("li",{parentName:"ul"},"\u900f\u904e volume \u7684\u65b9\u5f0f\u5c07 configMap \u4ee5 file \u7684\u5f62\u5f0f mount \u9032 container \u5167")),(0,r.kt)("p",null,"\u9019\u908a\u63d0\u4f9b\u4e00\u500b ConfigMap \u7684\u7bc4\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: api-env\ndata:\n  API_NAME: api-server\n  DATABASE_HOST: "127.0.0.1"\n  DATABASE_PORT: "5432"\n  DATABASE_NAME: exmaples\n  REDIS_HOST: "127.0.0.1"\n  REDIS_PORT: "6379"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: api-server\nspec:\n  containers:\n    - image: api-server\n      name: api-server\n      envFrom: # \u4ee5\u74b0\u5883\u8b8a\u6578\u7684\u65b9\u5f0f\u63d2\u5165\u5230container\u4e2d\n        - configMapRef:\n          name: api-env\n")),(0,r.kt)("h2",{id:"secret-\u57fa\u672c\u4ecb\u7d39"},"Secret \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("p",null,"Secret \u662f Kubernetes \u63d0\u4f9b\u7528\u4f86\u5132\u5b58\u654f\u611f\u8cc7\u6599\u7684\u5143\u4ef6\uff0c\u672c\u8eab\u4e5f\u662f Key-Value \u7684\u5f62\u5f0f\uff0c\u4f46 Value \u7684\u90e8\u5206\u6703\u7d93\u904e base64 \u7684\u7de8\u78bc\uff0c\u5e38\u898b\u7684\u5132\u5b58\u6578\u503c\u53ef\u80fd\u662f\u8cc7\u6599\u5eab\u5bc6\u78bc\u6216\u5167\u90e8\u7684 API Token \u7b49\u3002ConfigMap \u8207 Secret \u5728\u4f7f\u7528\u4e0a\u4e26\u6c92\u6709\u592a\u5927\u5dee\u5225\uff0c\u6700\u5927\u7684\u5dee\u7570\u5c31\u662f\u524d\u8005\u5132\u5b58\u5e38\u898b\u7684 config\uff0c\u5f8c\u8005\u5132\u5b58\u8f03\u654f\u611f\u7684 config \u800c\u5df2\u3002"),(0,r.kt)("admonition",{title:"Eric \u7684\u5371\u96aa\u767c\u8a00",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"\u5f88\u591a\u4eba\u90fd\u6703\u8aa4\u4ee5\u70ba Base64 \u662f\u4e00\u7a2e\u52a0\u5bc6\u65b9\u5f0f\uff0c\u9019\u500b\u8a8d\u77e5\u662f\u932f\u7684\u3002Base64 \u4e26\u975e\u52a0\u5bc6\u65b9\u5f0f\uff0c\u53ea\u662f\u4e00\u7a2e\u5728 linux \u4e0a\u5e38\u898b\u7684\u7de8\u78bc\u65b9\u5f0f\u800c\u5df2\uff0c\u7de8\u78bc\u7684\u904e\u7a0b\u4e2d\u4e5f\u4e0d\u6703\u52a0\u5165\u4efb\u4f55\u7684 salt \u7b49\u3002\u4e5f\u5c31\u662f\u8aaa\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u628a\u7de8\u78bc\u5f8c\u7684 base64 \u78bc\u9032\u884c\u89e3\u78bc\uff0c\u6240\u4ee5\u8a2d\u8a08\u6642\u5343\u842c\u4e0d\u8981\u4f7f\u7528 base64 \u4f86\u9032\u884c\u52a0\u5bc6\u3002")),(0,r.kt)("p",null,"\u9019\u908a\u63d0\u4f9b\u4e00\u500b secret \u7684\u7bc4\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"---\napiVersion: v1\nkind: Secret\ntype: Opaque\nmetadata:\n  name: api-server-secret\ndata:\n  DATABASE_PASSWORD: ZGF0YWJhc2UtcGFzc3dvcmQK\n  API_TOKEN: YXBpLXRva2VuCg==\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: api-server\nspec:\n  containers:\n    - image: api-server\n      name: api-server\n      volumeMounts: # \u4ee5volume\u7684\u65b9\u5f0fmount\u9032container\u4e2d\n        - name: api-secret-volume\n          mountPath: "/app/secret"\n          readOnly: true\n  volumes:\n    - name: api-secret-volume\n      secret:\n        secretName: api-server-secret\n')),(0,r.kt)("h2",{id:"emptydir-\u57fa\u672c\u4ecb\u7d39"},"emptyDir \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("p",null,"emptyDir \u662f\u4e00\u7a2e\u66ab\u6642\u6027\u7684\u5132\u5b58\u7a7a\u9593\uff0c\u7576 Pod \u88ab\u5efa\u7acb\u5728\u67d0\u500b Node \u6642\uff0c\u8a72 emptyDir \u5c31\u6703\u88ab\u5efa\u7acb\u8d77\u4f86\u4e26 mount \u9032\u8a72 Pod \u88e1\u9762\uff0c\u800c Pod \u5167\u7684 Container \u53ef\u4ee5\u76e1\u60c5\u5730\u5c0d\u4ed6\u9032\u884c\u8b80\u5beb\u3002Pod \u7684\u904b\u884c\u671f\u9593\u8a72 emptyDir \u90fd\u6703\u4e00\u76f4\u5b58\u5728\uff0c\u76f4\u5230 Pod \u88ab\u5f9e Node \u4e0a\u79fb\u9664\u70ba\u6b62\u3002\u4e5f\u5c31\u662f\u8aaa emptyDir \u662f\u6709 lifecycle \u7684\uff0c\u9019\u500b lifecycle \u5c31\u76f8\u7576\u65bc Pod \u7684 lifecycle\uff0c\u5728 Pod \u6c92\u6709\u88ab\u79fb\u9664\u4e4b\u524d\uff0c\u7121\u8ad6 Pod \u5167\u90e8\u7684 Container \u91cd\u555f\u5e7e\u6b21\uff0cContainer \u90fd\u6703\u62ff\u5230\u9019\u500b emptyDir \u6700\u65b0\u7684\u8cc7\u6599\u3002"),(0,r.kt)("p",null,"emptyDir \u53ef\u4ee5\u9054\u5230\u7684\u6548\u679c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u4e00\u500b\u5728\u540c\u500b Pod \u4e2d\u7684\u591a\u500b Container \u7684\u5171\u7528\u8cc7\u6599\u593e"),(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u4e00\u500b\u7d66 Application \u7684\u66ab\u6642\u6027\u7a7a\u9593(\u4f8b\u5982 api-server \u7684 cache \u6578\u64da)")),(0,r.kt)("p",null,"\u9019\u908a\u63d0\u4f9b\u4e00\u500b emptyDir \u7684\u7bc4\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: api-server\nspec:\n  containers:\n    - image: api-server\n      name: api-server\n      volumeMounts:\n        - mountPath: /cache # mount\u9032\u9019\u500b\u4f4d\u7f6e\n          name: cache-volume\n  volumes:\n    - name: cache-volume\n      emptyDir: {}\n")),(0,r.kt)("h2",{id:"hostpath-\u57fa\u672c\u4ecb\u7d39"},"hostPath \u57fa\u672c\u4ecb\u7d39"),(0,r.kt)("p",null,"hostPath \u4e5f\u662f\u4e00\u7a2e\u66ab\u6642\u6027\u7684\u5132\u5b58\u7a7a\u9593\uff0c\u9867\u540d\u601d\u7fa9\u5b83\u662f\u5c07 Node \u4e0a\u6307\u5b9a\u7684 Path mount \u9032 Pod \u7684 Container \u4e2d\u3002\u7531\u65bc\u662f Node \u4e0a\u8cc7\u6599\u593e\uff0c\u53ef\u60f3\u800c\u77e5 hostPath \u7684 lifecycle \u5c31\u7b49\u65bc Node \u7684 lifecycle\uff0chostPath \u9019\u500b volume \u53ea\u6703\u96a8\u8457 Node \u6d88\u5931\u800c\u6d88\u5931\u3002\u4e5f\u5c31\u662f\u8aaa\u5373\u4fbf\u662f\u8a72 Node \u7684 Pod \u88ab\u522a\u9664\u4e86\u6216\u662f\u91cd\u555f\u4e86\uff0c\u90fd\u4e0d\u6703\u5f71\u97ff\u5230\u8a72 hostPath \u5167\u7684\u6240\u6709\u8cc7\u6599\u3002"),(0,r.kt)("p",null,"\u9019\u908a\u63d0\u4f9b\u4e00\u500b hostPath \u7684\u7bc4\u4f8b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: api-server\nspec:\n  containers:\n    - image: api-server\n      name: api-server\n      volumeMounts:\n        - mountPath: /\n          name: hostpath-volume\n  volumes:\n    - name: hostpath-volume\n      hostPath:\n        path: /data # \u9700\u6307\u5b9aHost\u4e0a\u7684Path\n        type: Directory\n")),(0,r.kt)("h2",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,r.kt)("p",null,"\u9019\u908a\u6587\u7ae0\u4e3b\u8981\u804a\u5230\u4e86 Kubernetes Volume \u53ca\u4e00\u4e9b\u5e38\u898b\u7684 Volume \u7684\u7528\u6cd5\uff0c\u5373\u4fbf\u662f\u4f7f\u7528 Docker \u6642\uff0cVolume \u90fd\u662f\u4e00\u500b\u76f8\u7576\u5e38\u7528\u7684\u5de5\u5177\u3002\u76f8\u6bd4 Docker Volume \u8207 Kubernetes Volume \u4ed6\u5011\u7684\u6982\u5ff5\u4e0a\u662f\u5dee\u4e0d\u591a\u7684\uff0c\u53ea\u662f Docker \u5728 Volume \u7684\u7ba1\u7406\u4e0a\u76f8\u5c0d\u6bd4\u8f03\u4e0d\u56b4\u8b39\u4e00\u9ede\uff0c\u7136\u5f8c\u7a2e\u985e\u4e0a\u4e5f\u6c92\u6709 Kubernetes \u63d0\u4f9b\u9019\u9ebc\u591a\u4e0d\u540c\u985e\u578b\u7684 Volume\u3002\u518d\u4f86 ConfigMap \u8207 Secret \u5e7e\u4e4e\u662f\u6700\u5e38\u4f7f\u7528\u7684 Volume \u4e4b\u4e00\uff0c\u900f\u904e\u9019\u4e9b\u9019\u5169\u500b\u5143\u4ef6\u53ef\u4ee5\u4f7f\u6211\u5011\u7684\u7a0b\u5f0f\u8b8a\u5f97\u66f4\u52a0\u7684\u5f48\u6027\uff0c\u5b89\u5168\u6027\u7684\u90e8\u5206\u4e5f\u80fd\u900f\u904e rbac \u7684\u65b9\u5f0f\u963b\u64cb\u6240\u6709\u958b\u767c\u8005\u770b\u5230\u4e00\u4e9b\u4ed6\u5011\u4e0d\u8a72\u770b\u5230\u7684\u654f\u611f\u8cc7\u8a0a\u3002\u6700\u5f8c\u7684\u6700\u5f8c\u6211\u5011\u9019\u7bc7\u6587\u7ae0\u5176\u5be6\u53ea\u63d0\u5230\u4e86\u8ddf\u5167\u90e8\u8cc7\u6599\u6bd4\u8f03\u76f8\u95dc\u7684\u985e\u578b\uff0c\u5176\u5be6 Kubernetes \u9084\u63d0\u4f9b\u4e86 NFS(Network FileSystem)\u548c Persistent Volumes \u7b49\u7684\u65b9\u5f0f\u4f86\u652f\u63f4\u5916\u90e8\u7684 storage\uff0c\u9019\u4e9b\u6211\u5011\u7559\u5230\u672a\u4f86\u9032\u968e\u7bc7\u518d\u4f86\u8a0e\u8ad6\u3002"))}c.isMDXComponent=!0}}]);